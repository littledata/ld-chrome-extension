<<<<<<< HEAD
var fs = require( 'fs' );
var write = require( 'write' );
var flatted = require( 'flatted' );

module.exports = {
=======
var fs = require( 'graceful-fs' );
var write = require( 'write' );
var circularJson = require( 'circular-json' );

module.exports = {

>>>>>>> 6c7e671f6f414158c13f6db5311da5440bc68ee0
  tryParse: function ( filePath, defaultValue ) {
    var result;
    try {
      result = this.readJSON( filePath );
    } catch (ex) {
      result = defaultValue;
    }
    return result;
  },

  /**
<<<<<<< HEAD
   * Read json file synchronously using flatted
=======
   * Read json file synchronously using circular-json
>>>>>>> 6c7e671f6f414158c13f6db5311da5440bc68ee0
   *
   * @method readJSON
   * @param  {String} filePath Json filepath
   * @returns {*} parse result
   */
  readJSON: function ( filePath ) {
<<<<<<< HEAD
    return flatted.parse( fs.readFileSync( filePath, {
      encoding: 'utf8'
    } ) );
=======
    return circularJson.parse( fs.readFileSync( filePath ).toString() );
>>>>>>> 6c7e671f6f414158c13f6db5311da5440bc68ee0
  },

  /**
   * Write json file synchronously using circular-json
   *
   * @method writeJSON
   * @param  {String} filePath Json filepath
   * @param  {*} data Object to serialize
   */
  writeJSON: function ( filePath, data ) {
<<<<<<< HEAD
    write.sync( filePath, flatted.stringify( data ) );
  }
=======
    write.sync( filePath, circularJson.stringify( data ) );
  }

>>>>>>> 6c7e671f6f414158c13f6db5311da5440bc68ee0
};
